<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PCB Flash USA - Custom PCB Prototype Order</title>
    <style>
        :root {
            --primary: #35BEAC;
            --primary-hover: #1A256A;
            --light-gray: #f5f5f7;
            --mid-gray: #ccc;
            --dark-gray: #444;
            --white: #fff;
            --border-radius: 8px;
            --shadow: 0 4px 12px rgba(0,0,0,0.08);
            --container-width: 90%; /* Changed from fixed 1100px to be more responsive */
            --container-max-width: 1400px; /* Increased from 1100px for wider desktop view */
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            color: #333;
            background-color: #f9f9f9;
            line-height: 1.5;
        }
        
        header {
            text-align: center;
            padding: 20px;
            background-color: var(--white);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        main {
            width: var(--container-width);
            max-width: var(--container-max-width);
            margin: 2rem auto;
            padding: 2rem;
            background-color: var(--white);
            box-shadow: var(--shadow);
            border-radius: 12px;
        }
        
        .pcb-preview-container {
            margin-top: 20px;
            padding: 15px;
            background-color: var(--light-gray);
            border-radius: var(--border-radius);
            text-align: center;
        }
        
        .pcb-preview {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 10px;
            margin: 10px auto;
            width: 220px;
            height: 220px;
            box-shadow: var(--shadow);
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .pcb-preview img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            transition: all 0.5s ease;
            /* Remove browser controls on images */
            -webkit-user-select: none;
            user-select: none;
            pointer-events: none; /* This prevents interaction with the image */
            /* Disable context menu on right-click */
            -webkit-touch-callout: none;
        }
        
        .preview-caption {
            font-size: 14px;
            color: var(--dark-gray);
            margin-top: 10px;
        }
        
        h1 {
            color: var(--primary);
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        h2 {
            color: var(--dark-gray);
            border-bottom: 2px solid var(--primary);
            padding-bottom: 10px;
            margin-top: 30px;
            margin-bottom: 20px;
            font-weight: 500;
        }
        
        h3 {
            color: var(--dark-gray);
            margin-top: 25px;
            font-weight: 500;
        }
        
        .tagline {
            font-size: 18px;
            color: var(--dark-gray);
            margin-top: 5px;
        }
        
        /* Progress tracker */
        .progress-container {
            margin: 30px 0;
            max-width: 800px; /* Added to ensure the progress bar doesn't stretch too wide */
            margin-left: auto;
            margin-right: auto;
        }
        
        .progress-steps {
            display: flex;
            justify-content: space-between;
            position: relative;
        }
        
        .progress-steps::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 4px;
            background-color: var(--light-gray);
            transform: translateY(-50%);
            z-index: 1;
        }
        
        .progress-bar {
            position: absolute;
            top: 50%;
            left: 0;
            height: 4px;
            background-color: var(--primary);
            transform: translateY(-50%);
            z-index: 2;
            transition: width 0.3s ease;
            width: 33%; /* Will be updated via JS */
        }
        
        .step {
            position: relative;
            z-index: 3;
            background-color: var(--light-gray);
            color: var(--dark-gray);
            border-radius: 50%;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            transition: all 0.2s ease;
        }
        
        .step.active {
            background-color: var(--primary);
            color: var(--white);
            transform: scale(1.1);
        }
        
        .step-label {
            position: absolute;
            top: 45px;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
            font-size: 14px;
        }
        
        /* Form styles */
        .form-section {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
            position: absolute;
            width: 100%;
            pointer-events: none;
        }
        
        .form-section.active {
            opacity: 1;
            transform: translateY(0);
            position: relative;
            pointer-events: all;
        }
        
        .form-row {
            display: flex;
            flex-wrap: wrap;
            margin: 0 -15px; /* Increased from -10px for more spacing */
        }
        
        .form-col {
            flex: 1;
            padding: 0 15px; /* Increased from 10px for more spacing */
            min-width: 300px;
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        input[type="text"], 
        input[type="email"], 
        input[type="tel"],
        input[type="number"],
        input[type="date"],
        select, 
        textarea {
            width: 100%;
            padding: 14px;
            border: 1px solid var(--mid-gray);
            border-radius: var(--border-radius);
            box-sizing: border-box;
            margin-bottom: 20px;
            transition: border 0.2s ease;
            font-size: 16px; /* Added for better readability */
        }
        
        input:focus, 
        select:focus, 
        textarea:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(53, 190, 172, 0.2); /* Updated to match primary color */
        }
        
        input[type="radio"],
        input[type="checkbox"] {
            margin-right: 8px;
        }
        
        .radio-group,
        .checkbox-group {
            display: flex;
            flex-wrap: wrap; /* Added to improve responsive behavior */
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .radio-group label,
        .checkbox-group label {
            display: inline-flex;
            align-items: center;
            margin: 0;
            font-weight: normal;
            min-width: 120px; /* Added to prevent squishing */
        }
        
        /* Quote calculator */
        .quote-calculator {
            background-color: #f9f9f9;
            border: 1px solid var(--mid-gray);
            border-radius: var(--border-radius);
            padding: 25px; /* Increased from 20px */
            margin-bottom: 30px;
        }
        
        .quote-result {
            text-align: center;
            background-color: #e9f7e9;
            border: 1px solid var(--primary);
            border-radius: var(--border-radius);
            padding: 20px; /* Increased from 15px */
            margin: 25px 0; /* Increased from 20px */
        }
        
        .quote-price {
            font-size: 28px; /* Increased from 24px */
            font-weight: bold;
            color: var(--primary);
            margin: 15px 0; /* Increased from 10px */
        }
        
        .quote-disclaimer {
            font-size: 14px;
            color: #666;
            font-style: italic;
            text-align: center;
            margin: 15px 0;
        }
        
        /* File upload */
        .file-upload {
            border: 2px dashed var(--mid-gray);
            border-radius: var(--border-radius);
            padding: 30px; /* Increased from 20px */
            text-align: center;
            margin-bottom: 25px; /* Increased from 20px */
            cursor: pointer;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .file-upload:hover {
            border-color: var(--primary);
            background-color: rgba(53, 190, 172, 0.05); /* Added subtle hover effect */
        }
        
        .file-upload input[type="file"] {
            opacity: 0;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }
        
        .file-upload p {
            margin: 0;
            padding: 10px;
            font-size: 16px; /* Added for better readability */
        }
        
        .file-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background-color: var(--light-gray);
            padding: 10px 15px; /* Increased from 8px 12px */
            border-radius: var(--border-radius);
            margin-top: 12px; /* Increased from 10px */
        }
        
        .file-item button {
            background: none;
            border: none;
            color: red;
            cursor: pointer;
            font-size: 16px;
            padding: 5px; /* Added for better clickability */
        }
        
        /* Advanced options accordion */
        .accordion {
            background-color: var(--light-gray);
            color: var(--dark-gray);
            cursor: pointer;
            padding: 18px; /* Increased from 15px */
            width: 100%;
            text-align: left;
            border: none;
            border-radius: var(--border-radius);
            outline: none;
            font-size: 16px;
            font-weight: 500;
            transition: 0.3s;
            position: relative;
            margin-bottom: 8px; /* Increased from 5px */
        }
        
        .accordion:after {
            content: '\002B';
            font-weight: bold;
            float: right;
            font-size: 18px; /* Added for better visibility */
        }
        
        .accordion.active:after {
            content: "\2212";
        }
        
        .accordion:hover {
            background-color: var(--mid-gray);
        }
        
        .panel {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            background-color: var(--white);
            padding: 0 18px; /* Increased from 15px */
            border-left: 1px solid var(--light-gray); /* Added for visual separation */
            border-right: 1px solid var(--light-gray); /* Added for visual separation */
            border-bottom: 1px solid var(--light-gray); /* Added for visual separation */
            border-radius: 0 0 var(--border-radius) var(--border-radius); /* Added for visual consistency */
            margin-top: -8px; /* Added to connect with accordion */
            margin-bottom: 16px; /* Added for spacing between accordion groups */
        }
        
        /* Buttons */
        .btn-container {
            display: flex;
            gap: 20px; /* Increased from 15px */
            margin-top: 35px; /* Increased from 30px */
            justify-content: space-between;
        }
        
        .btn {
            padding: 14px 30px; /* Increased from 12px 25px */
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 16px;
            font-weight: 500; /* Changed from 400 */
            transition: all 0.2s ease; /* Added 'all' for smoother transitions */
        }
        
        .btn-previous {
            background-color: var(--light-gray);
            color: var(--dark-gray);
        }
        
        .btn-previous:hover {
            background-color: var(--mid-gray);
            transform: translateY(-2px); /* Added subtle hover effect */
        }
        
        .btn-next, 
        .btn-submit,
        .btn-calculate {
            background-color: var(--primary);
            color: var(--white);
        }
        
        .btn-next:hover, 
        .btn-submit:hover,
        .btn-calculate:hover {
            background-color: var(--primary-hover);
            transform: translateY(-2px); /* Added subtle hover effect */
            box-shadow: 0 4px 8px rgba(0,0,0,0.1); /* Added subtle shadow effect */
        }
        
        .btn-secondary {
            background-color: #f0f0f0;
            color: var(--dark-gray);
            border: 1px solid var(--mid-gray);
        }
        
        .btn-secondary:hover {
            background-color: #e0e0e0;
            transform: translateY(-2px); /* Added subtle hover effect */
        }
        
        /* Review table */
        .review-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 25px; /* Increased from 20px */
        }
        
        .review-table th {
            background-color: var(--light-gray);
            text-align: left;
            padding: 12px 15px; /* Increased from 10px */
            border: 1px solid var(--mid-gray);
        }
        
        .review-table td {
            padding: 12px 15px; /* Increased from 10px */
            border: 1px solid var(--mid-gray);
        }
        
        .required {
            color: red;
            font-weight: bold;
        }
        
        .specs-container {
            display: flex;
            flex-wrap: wrap;
            gap: 30px; /* Increased from 20px */
            margin-bottom: 35px; /* Increased from 30px */
        }
        
        .specs-form {
            flex: 3; /* Changed from 1 to give more space to the form */
            min-width: 300px;
        }
        
        .specs-preview {
            flex: 1; /* Added to maintain proportion */
            width: 300px; /* Increased from 280px */
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            margin: 0 auto;
        }
        
        .pcb-preview-container {
            margin-top: 0;
            padding: 20px; /* Increased from 15px */
            background-color: var(--light-gray);
            border-radius: var(--border-radius);
            text-align: center;
            /* Disable selection across the entire preview container */
            -webkit-user-select: none;
            user-select: none;
        }
        
        /* Tooltip */
        .tooltip {
            position: relative;
            display: inline-block;
            margin-left: 5px;
            cursor: help;
        }
        
        .tooltip-icon {
            background-color: var(--dark-gray);
            color: var(--white);
            border-radius: 50%;
            width: 18px; /* Increased from 16px */
            height: 18px; /* Increased from 16px */
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }
        
        .tooltip-text {
            visibility: hidden;
            width: 250px; /* Increased from 200px for more content */
            background-color: var(--dark-gray);
            color: var(--white);
            text-align: center;
            border-radius: var(--border-radius);
            padding: 10px; /* Increased from 8px */
            position: absolute;
            z-index: 10;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-weight: normal;
            font-size: 13px; /* Increased from 12px */
            line-height: 1.5; /* Added for better readability */
        }
        
        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
        
        /* Medium screens */
        @media (max-width: 1200px) {
            :root {
                --container-width: 95%;
            }
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            :root {
                --container-width: 100%;
            }
            
            main {
                padding: 1.5rem;
                border-radius: 0;
                margin: 1rem 0;
            }
            
            .form-col {
                flex: 100%;
            }
            
            .step-label {
                display: none;
            }
            
            .btn-container {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
            
            .specs-container {
                flex-direction: column;
            }
            
            .specs-preview {
                width: 100%;
                max-width: 300px;
            }
        }
        
        /* Small screens */
        @media (max-width: 480px) {
            .form-row {
                margin: 0;
            }
            
            .form-col {
                padding: 0;
            }
            
            .radio-group,
            .checkbox-group {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- <header>
        <h1>PCB Flash USA</h1>
        <p class="tagline">Trusted by 30,000+ engineers. Built on Japan's trusted PCB platform.</p>
    </header> -->
    
    <main>
        <h2>Custom PCB Prototype Order</h2>
        <p>Get an instant quote for your custom PCB prototype and submit your order with ease.</p>
        
        <div class="progress-container">
            <div class="progress-steps">
                <div class="progress-bar" id="progress-bar"></div>
                <div class="step active" data-step="1">1<div class="step-label">Specifications</div></div>
                <div class="step" data-step="2">2<div class="step-label">File Upload</div></div>
                <div class="step" data-step="3">3<div class="step-label">Review</div></div>
            </div>
        </div>
        
        <form id="pcb-order-form">
            <!-- Step 1: Specifications & Instant Quote -->
            <section id="step-1" class="form-section active">
                <h2>Instant Quote Calculator</h2>
                <div class="quote-calculator">
                    <div class="form-row">
                        <div class="form-col">
                            <label for="quote-dimensions">
                              <img 
                                src="https://cdn.shopify.com/s/files/1/0924/5730/4373/files/dimensions.png?v=1745608927" 
                                alt="Dimensions Icon" 
                                width="60"          
                                height="45"          
                                style="vertical-align:middle; margin-right:5px;">
                              Board Dimensions (mm)</label>
                            <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                                <input type="number" id="quote-width" placeholder="Width (mm)" style="margin-bottom: 0;">
                                <span style="display: flex; align-items: center;">√ó</span>
                                <input type="number" id="quote-height" placeholder="Height (mm)" style="margin-bottom: 0;">
                            </div>
                            
                            <label for="quote-layers">
                              <img 
                                src="https://cdn.shopify.com/s/files/1/0924/5730/4373/files/layers.png?v=1745608927" 
                                alt="Layers Icon" 
                                width="60"          
                                height="45"          
                                style="vertical-align:middle; margin-right:5px;">
                              Number of Layers</label>
                            <select id="quote-layers">
                                <option value="1">1 Layer</option>
                                <option value="2" selected>2 Layers</option>
                                <option value="4">4 Layers</option>
                                <option value="6">6 Layers</option>
                                <option value="8">8 Layers</option>
                                <option value="10">10 Layers</option>
                                <option value="12">12 Layers</option>
                            </select>
                        </div>
                        <div class="form-col">
                            <label for="quote-quantity">
                              <img 
                                src="https://cdn.shopify.com/s/files/1/0924/5730/4373/files/sheet_quantity.png?v=1745608927" 
                                alt="Quantity Icon" 
                                width="60"          
                                height="45"          
                                style="vertical-align:middle; margin-right:5px;">
                              Quantity</label>
                            <input type="number" id="quote-quantity" min="1" value="1">
                            
                            <div style="display: flex; justify-content: center; margin-top: 10px;">
                                <button type="button" class="btn btn-calculate" id="calculate-quote">Calculate Quote</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="quote-result" id="quote-result" style="display: none;">
                        <h3>Estimated Price:</h3>
                        <div class="quote-price" id="quote-price">$45.00</div>
                        <p>Based on standard production time (7-10 business days)</p>
                    </div>
                    
                    <p class="quote-disclaimer">Note: Instant quotes are rough estimations. <br>For a more accurate quote, please submit as much information as possible and we will get back to you ASAP.</p>
                </div>
                
                <h2>Basic Information</h2>
                <div class="form-row">
                  <div class="form-col">
                    <label for="project-name">
                      <img 
                        src="https://cdn.shopify.com/s/files/1/0924/5730/4373/files/project_title.png?v=1745585583" 
                        alt="Project Name Icon" 
                        width="60" 
                        height="45" 
                        style="vertical-align:middle; margin-right:5px;">
                      Project Name / Job Number <span class="required">*</span>
                    </label>
                    <input type="text" id="project-name" name="project-name" required>
                
                    <label for="contact-name">
                      <img 
                        src="https://cdn.shopify.com/s/files/1/0924/5730/4373/files/contact_name.png?v=1745585583" 
                        alt="Name Icon" 
                        width="60" 
                        height="45" 
                        style="vertical-align:middle; margin-right:5px;">
                      Contact Name <span class="required">*</span>
                    </label>
                    <input type="text" id="contact-name" name="contact-name" required>
                
                    <label for="contact-email">
                      <img 
                        src="https://cdn.shopify.com/s/files/1/0924/5730/4373/files/contact_email.png?v=1745585583" 
                        alt="Email Icon" 
                        width="60" 
                        height="45" 
                        style="vertical-align:middle; margin-right:5px;">
                      Contact Email <span class="required">*</span>
                    </label>
                    <input type="email" id="contact-email" name="contact-email" required>
                
                    <label for="contact-phone">
                      <img 
                        src="https://cdn.shopify.com/s/files/1/0924/5730/4373/files/contact_phone.png?v=1745585583" 
                        alt="Phone Icon" 
                        width="60" 
                        height="45" 
                        style="vertical-align:middle; margin-right:5px;">
                      Contact Phone
                    </label>
                    <input type="tel" id="contact-phone" name="contact-phone">
                  </div>
                    
                    <div class="form-col">
                        <label>Service Type <span class="required">*</span></label>
                        <div class="checkbox-group">
                            <label>
                                <input type="checkbox" id="service-fabrication" name="service-type" value="fabrication" checked> 
                                PCB Fabrication
                            </label>
                            <label>
                                <input type="checkbox" id="service-assembly" name="service-type" value="assembly"> 
                                PCB Assembly
                            </label>
                        </div>
                        
                        <label for="turn-time">Desired Turn-Time</label>
                        <select id="turn-time" name="turn-time">
                            <option value="standard" selected>Standard (7-10 days)</option>
                            <option value="expedited">Expedited (5-7 days)</option>
                            <option value="rush">Rush (3-5 days)</option>
                            <option value="super-rush">Super Rush (1-2 days)</option>
                        </select>
                        
                        <label for="dimensions">
                          <img 
                            src="https://cdn.shopify.com/s/files/1/0924/5730/4373/files/dimensions.png?v=1745608927" 
                            alt="Dimensions Icon" 
                            width="60"          
                            height="45"          
                            style="vertical-align:middle; margin-right:5px;">
                          Board Dimensions (mm) <span class="required">*</span></label>
                        <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                            <input type="number" id="board-width" placeholder="Width (mm)" style="margin-bottom: 0;" required>
                            <span style="display: flex; align-items: center;">√ó</span>
                            <input type="number" id="board-height" placeholder="Height (mm)" style="margin-bottom: 0;" required>
                        </div>
                        
                        <label for="quantity">
                          <img 
                            src="https://cdn.shopify.com/s/files/1/0924/5730/4373/files/sheet_quantity.png?v=1745608927" 
                            alt="Quantity Icon" 
                            width="60"          
                            height="45"          
                            style="vertical-align:middle; margin-right:5px;">
                          Quantity <span class="required">*</span></label>
                        <input type="number" id="quantity" name="quantity" min="1" value="1" required>

                        <label for="layers">
                          <img 
                            src="https://cdn.shopify.com/s/files/1/0924/5730/4373/files/layers.png?v=1745608927" 
                            alt="Layers Icon" 
                            width="60"          
                            height="45"          
                            style="vertical-align:middle; margin-right:5px;">
                          Number of Layers <span class="required">*</span></label>
                        <select id="layers" name="layers" required>
                            <option value="1">1 Layer</option>
                            <option value="2" selected>2 Layers</option>
                            <option value="4">4 Layers</option>
                            <option value="6">6 Layers</option>
                            <option value="8">8 Layers</option>
                            <option value="10">10 Layers</option>
                            <option value="12">12 Layers</option>
                        </select>                
                    </div>
                </div>
                
                <h2>PCB Specifications</h2>
                <div class="specs-container">
                  <div class="specs-form">
                    <div class="form-row">
                        <div class="form-col">
                            
                            <label for="board-material">Board Material</label>
                            <select id="board-material" name="board-material">
                                <option value="fr4" selected>Standard FR-4</option>
                                <option value="high-fr4">High-Tg FR-4 (Tg180)</option>
                                <option value="no-halo-fr4">Halogen-Free FR-4</option>
                                <option value="cti600-fr4">CTI600 FR-4 (Tracking-Resistant)</option>
                                <option value="panasonic-r1705">Panasonic R1705 (FR-4 Equivalent)</option>
                                <option value="panasonic-meg">Panasonic Megtron 6</option>
                                <option value="rogers">Rogers 4350B</option>
                                <option value="cem-3">CEM-3</option>
                                <option value="fr-1">FR-1 (Paper-Based)</option>
                            </select>
                            
                            <label for="board-thickness">Board Thickness</label>
                            <select id="board-thickness" name="board-thickness">
                                <option value="0.4mm">0.4mm</option>
                                <option value="0.6mm">0.6mm</option>
                                <option value="0.8mm">0.8mm</option>
                                <option value="1.0mm">1.0mm</option>
                                <option value="1.2mm">1.2mm</option>
                                <option value="1.6mm" selected>1.6mm</option>
                                <option value="2.0mm">2.0mm</option>
                                <option value="3.0mm">3.0mm</option>
                            </select>

                            <label for="copper-weight">Copper Weight</label>
                            <select id="copper-weight" name="copper-weight">
                                <option value="0.5oz" selected>0.5oz (18Œºm)</option>
                                <option value="1oz">1oz (35Œºm)</option>
                                <option value="2oz">2oz (70Œºm)</option>
                                <option value="3oz">3oz (105Œºm)</option>
                                <option value="4oz">4oz (140Œºm)</option>
                                <option value="5oz">5oz (175Œºm)</option>
                                <!-- Mixed inner/outer layer copper weights -->
                                <option value="inner-1oz_outer-0.5oz">Inner: 1oz (35Œºm), Outer: 0.5oz (18Œºm)</option>
                                <option value="inner-1oz_outer-1oz">Inner: 1oz (35Œºm), Outer: 1oz (35Œºm)</option>
                                <option value="inner-1oz_outer-2oz">Inner: 1oz (35Œºm), Outer: 2oz (70Œºm)</option>
                                <option value="inner-2oz_outer-2oz">Inner: 2oz (70Œºm), Outer: 2oz (70Œºm)</option>
                                <option value="inner-0.5oz_outer-0.5oz">Inner: 0.5oz (18Œºm), Outer: 0.5oz (18Œºm)</option>
                                <option value="inner-0.5oz_outer-1oz">Inner: 0.5oz (18Œºm), Outer: 1oz (35Œºm)</option>
                                <option value="inner-0.5oz_outer-2oz">Inner: 0.5oz (18Œºm), Outer: 2oz (70Œºm)</option>
                                <option value="inner-2oz_outer-0.5oz">Inner: 2oz (70Œºm), Outer: 0.5oz (18Œºm)</option>
                                <option value="inner-2oz_outer-1oz">Inner: 2oz (70Œºm), Outer: 1oz (35Œºm)</option>
                            </select>
                            
                            <label for="surface-finish">Surface Finish</label>
                            <select id="surface-finish" name="surface-finish">
                                <option value="hasl">HASL (lead)</option>
                                <option value="lead-free-hasl">HASL (lead-free)</option>
                                <option value="enig" selected>ENIG</option>
                                <option value="osp">OSP</option>
                                <option value="immersion-silver">Immersion Silver</option>
                                <option value="immersion-tin">Immersion Tin</option>
                                <option value="hard-gold">Hard Gold</option>
                            </select>
                          
                            <label for="manufacturer">
                              <img 
                                src="https://cdn.shopify.com/s/files/1/0924/5730/4373/files/factory.png?v=1745609457" 
                                alt="Factory Icon" 
                                width="60"          
                                height="45"          
                                style="vertical-align:middle; margin-right:5px;">
                              Manufacturer Location</label>
                              <select id="manufacturer" name="manufacturer">
                                  <option value="any">üåê Any</option>
                                  <option value="japan">Japan</option>
                                  <option value="south-korea">South Korea</option>
                                  <option value="taiwan">Taiwan</option>
                              </select>
                        </div>
                        
                        <div class="form-col">                          
                            <label for="soldermask-color">Soldermask Color</label>
                            <select id="soldermask-color" name="soldermask-color" class="soldermask-select">
                                <option value="green" selected>üü¢ Green</option>
                                <option value="red">üî¥ Red</option>
                                <option value="blue">üîµ Blue</option>
                                <option value="black">‚ö´ Black</option>
                                <option value="white">‚ö™ White</option>
                                <option value="yellow">üü° Yellow</option>
                                <option value="purple">üü£ Purple</option>
                            </select>
                            
                            <label for="silkscreen-color">Silkscreen Color</label>
                            <select id="silkscreen-color" name="silkscreen-color" class="silkscreen-select">
                                <option value="white" selected>‚ö™ White</option>
                                <option value="black">‚ö´ Black</option>
                                <option value="yellow">üü° Yellow</option>
                                <option value="no-color">üö´ No Color</option>
                            </select>

                            <div class="specs-preview">
                              <div class="pcb-preview-container">
                                <h4>Live Board Preview</h4>
                                <div class="pcb-preview" id="pcb-preview">
                                  <img src="https://cdn.shopify.com/s/files/1/0924/5730/4373/files/pcb-green-white.png?v=1745853148" alt="PCB Preview" id="pcb-preview-image">
                                </div>
                                <p class="preview-caption">PCB with <span id="soldermask-preview-text">green</span> soldermask and <span id="silkscreen-preview-text">white</span> silkscreen</p>
                              </div>
                            </div>
                        </div>
                      </div>
                   </div> 
                  
                </div>
                  
                <h3>Advanced Options</h3>
              
                <button type="button" class="accordion">
                  <img 
                    src="https://cdn.shopify.com/s/files/1/0924/5730/4373/files/panelization.png?v=1745608927" 
                    alt="Panelization Icon" 
                    width="60"          
                    height="45"          
                    style="vertical-align:middle; margin-right:5px;">
                  Board Panelization</button>
                <div class="panel">
                    <div class="form-row">
                        <div class="form-col">              
                            <label for="panel-size">Panel Size (mm)</label>
                            <input type="text" id="panel-size" name="panel-size" placeholder="e.g., 100x150">
                
                            <label for="finished-panel-size">Finished Panel Size (mm)</label>
                            <input type="text" id="finished-panel-size" name="finished-panel-size" placeholder="e.g., 102x152">
                
                            <label for="rail-size">Rail Size (mm)</label>
                            <input type="text" id="rail-size" name="rail-size" placeholder="e.g., 5">
                
                            <label for="routing-method">Routing Method</label>
                            <select id="routing-method" name="routing-method">
                                <option value="v-cut">V-cut</option>
                                <option value="mouse-bites">Mouse Bites</option>
                                <option value="routed">Routed Only</option>
                            </select>
                        </div>
                        <div class="form-col">
                            <label for="router-bit">Router Bit Diameter (mm)</label>
                            <input type="text" id="router-bit" name="router-bit" placeholder="e.g., 2.0">
                
                            <label for="tab-count">Number of Tabs</label>
                            <input type="number" id="tab-count" name="tab-count" min="0" placeholder="e.g., 8">
                
                            <label for="panel-drawing">Upload Panel Drawing (Optional)</label>
                            <input type="file" id="panel-drawing" name="panel-drawing" accept=".pdf,.zip,.rar,.png,.jpg,.jpeg">
                        </div>
                    </div>
                </div>
              
                <button type="button" class="accordion">
                  <img 
                    src="https://cdn.shopify.com/s/files/1/0924/5730/4373/files/Flash-PCB__01_img02.png?v=1742999689" 
                    alt="DFM Icon" 
                    width="60"          
                    height="45"          
                    style="vertical-align:middle; margin-right:5px;">
                  DFM Parameters</button>
                <div class="panel">
                    <div class="form-row">
                        <div class="form-col">
                            <label for="min-trace-space">Min Trace/Space (mm)</label>
                            <input type="text" id="min-trace-space" name="min-trace-space" placeholder="e.g., 0.15/0.15">
                            
                            <label for="min-hole-size">Min Hole Size (mm)</label>
                            <input type="text" id="min-hole-size" name="min-hole-size" placeholder="e.g., 0.3">
                        </div>
                        <div class="form-col">
                            <label for="impedance-control">Impedance Control Required?</label>
                            <div class="radio-group">
                                <label>
                                    <input type="radio" name="impedance-control" value="yes"> Yes
                                </label>
                                <label>
                                    <input type="radio" name="impedance-control" value="no" checked> No
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <button type="button" class="accordion">PCB Testing & Inspection</button>
                <div class="panel">
                    <div class="form-row">
                        <div class="form-col">
                            <label for="electrical-test">Electrical Test</label>
                            <select id="electrical-test" name="electrical-test">
                                <option value="flying-probe" selected>Flying Probe</option>
                                <option value="bed-of-nails">Bed of Nails</option>
                                <option value="none">None</option>
                            </select>
                        </div>
                        <div class="form-col">
                            <label>Additional Inspection</label>
                            <div class="checkbox-group">
                                <label>
                                    <input type="checkbox" name="aoi-inspection" value="yes"> AOI Inspection
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <button type="button" class="accordion">Assembly Options</button>
                <div class="panel">
                    <div class="form-row">
                        <div class="form-col">
                            <label for="mounting-method">Mounting Method</label>
                            <select id="mounting-method" name="mounting-method">
                                <option value="reflow" selected>Reflow</option>
                                <option value="wave">Wave</option>
                                <option value="manual">Manual</option>
                                <option value="mixed">Mixed</option>
                            </select>
                            
                            <label for="smt-count">SMT Component Count</label>
                            <input type="number" id="smt-count" name="smt-count" min="0" placeholder="e.g., 50">
                            
                            <label for="dip-count">DIP Component Count</label>
                            <input type="number" id="dip-count" name="dip-count" min="0" placeholder="e.g., 10">
                        </div>
                        
                        <div class="form-col">
                            <label>Mounting Surface</label>
                            <div class="radio-group">
                                <label>
                                    <input type="radio" name="mounting-surface" value="single-side" checked> Single Side
                                </label>
                                <label>
                                    <input type="radio" name="mounting-surface" value="double-side"> Double Side
                                </label>
                            </div>
                            
                            <label>Parts Supply</label>
                            <div class="radio-group">
                                <label>
                                    <input type="radio" name="parts-supply" value="customer" id="customer-parts"> Customer Supplied
                                </label>
                                <label>
                                    <input type="radio" name="parts-supply" value="turnkey" checked> Turnkey (We Source)
                                </label>
                                <label>
                                    <input type="radio" name="parts-supply" value="partial"> Partial (Mixed)
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="btn-container" style="justify-content: flex-end;">
                    <button type="button" class="btn btn-next" id="step1-next">Next: File Upload</button>
                </div>
            </section>
            
            <!-- Step 2: File Upload -->
            <section id="step-2" class="form-section">
                <h2>Upload Files</h2>
                <p>Please upload the necessary files for your PCB prototype.</p>
                
                <div class="form-row">
                    <div class="form-col">
                        <label>Gerber Files <span class="required">*</span>
                            <div class="tooltip">
                                <span class="tooltip-icon">?</span>
                                <span class="tooltip-text">Include all copper, mask, silkscreen, and drill files. .zip format recommended.</span>
                            </div>
                        </label>
                        <div class="file-upload" id="gerber-upload">
                            <input type="file" id="gerber-files" name="gerber-files" accept=".zip,.rar,.gbr,.gbl,.gtl,.gts,.gbs,.gbo,.gto,.gtp,.gbp,.drl,.txt,.obd,.xml" required>
                            <p>Drag & drop Gerber files here or click to browse</p>
                            <div id="gerber-files-list"></div>
                        </div>
                    </div>
                </div>
                
                <div id="assembly-upload-section">
                    <h3>Assembly Files</h3>
                    <p>Required only if PCB Assembly service is selected.</p>
                    
                    <div class="form-row">
                        <div class="form-col">
                            <label>BOM (Bill of Materials)
                                <div class="tooltip">
                                    <span class="tooltip-icon">?</span>
                                    <span class="tooltip-text">Excel or CSV file with component reference designators and part numbers.</span>
                                </div>
                            </label>
                            <div class="file-upload" id="bom-upload">
                                <input type="file" id="bom-file" name="bom-file" accept=".csv,.xlsx,.xls">
                                <p>Drag & drop BOM here or click to browse</p>
                                <div id="bom-file-list"></div>
                            </div>
                        </div>
                        
                        <div class="form-col">
                            <label>Pick & Place File
                                <div class="tooltip">
                                    <span class="tooltip-icon">?</span>
                                    <span class="tooltip-text">XYRS coordinate file for component placement.</span>
                                </div>
                            </label>
                            <div class="file-upload" id="pnp-upload">
                                <input type="file" id="pnp-file" name="pnp-file" accept=".csv,.xlsx,.xls,.txt">
                                <p>Drag & drop P&P file here or click to browse</p>
                                <div id="pnp-file-list"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <h3>Additional Files (Optional)</h3>
                <div class="form-row">
                    <div class="form-col">
                        <label>Additional Design Files
                            <div class="tooltip">
                                <span class="tooltip-icon">?</span>
                                <span class="tooltip-text">Any additional design files that might help us understand your requirements.</span>
                            </div>
                        </label>
                        <div class="file-upload" id="additional-upload">
                            <input type="file" id="additional-files" name="additional-files" accept=".pdf,.doc,.docx,.jpg,.png,.txt">
                            <p>Drag & drop additional files here or click to browse</p>
                            <div id="additional-files-list"></div>
                        </div>
                    </div>
                    
                    <div class="form-col">
                        <label>Special Instructions / Notes</label>
                        <textarea id="special-instructions" name="special-instructions" rows="5" placeholder="Any additional requirements or notes for our team..."></textarea>
                    </div>
                </div>
            
                <div class="btn-container">
                    <button type="button" class="btn btn-previous">Previous: Specifications</button>
                    <button type="button" class="btn btn-next" id="step2-next">Next: Review</button>
                </div>
            </section>

<!-- Step 3: Review & Submit -->
<section id="step-3" class="form-section">
    <h2>Review Your Order</h2>
    <p>Please review your order details before submitting.</p>
    
    <h3>Order Summary</h3>
    <div class="review-table-container">
        <table class="review-table">
            <tr>
                <th>Project Name:</th>
                <td id="review-project-name"></td>
            </tr>
            <tr>
                <th>Contact:</th>
                <td id="review-contact"></td>
            </tr>
            <tr>
                <th>Board Dimensions:</th>
                <td id="review-dimensions"></td>
            </tr>
            <tr>
                <th>Quantity:</th>
                <td id="review-quantity"></td>
            </tr>
            <tr>
                <th>Layers:</th>
                <td id="review-layers"></td>
            </tr>
            <tr>
                <th>Service Type:</th>
                <td id="review-service-type"></td>
            </tr>
            <tr>
                <th>Turn Time:</th>
                <td id="review-turn-time"></td>
            </tr>
        </table>
    </div>
    
    <h3>Files Uploaded</h3>
    <div id="review-files"></div>
    
    <div class="btn-container">
        <button type="button" class="btn btn-previous">Previous: File Upload</button>
        <button type="submit" class="btn btn-submit">Submit Order</button>
    </div>
</section>
</form>
</main>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Form navigation elements
    const steps = document.querySelectorAll('.form-section');
    const progressBar = document.getElementById('progress-bar');
    const stepIndicators = document.querySelectorAll('.step');
    let currentStep = 1;
    
    // Button elements
    const calculateQuoteBtn = document.getElementById('calculate-quote');
    const step1NextBtn = document.getElementById('step1-next');
    const step2NextBtn = document.getElementById('step2-next');
    const prevBtns = document.querySelectorAll('.btn-previous');
    const accordions = document.querySelectorAll('.accordion');
    
    // Helper to get CSS variable
    function getCssVariable(name) {
      return getComputedStyle(document.documentElement).getPropertyValue(name).trim();
    }

    // Calculate Quote functionality
    if (calculateQuoteBtn) {
      calculateQuoteBtn.addEventListener('click', function() {
          const width = parseFloat(document.getElementById('quote-width').value) || 0;
          const height = parseFloat(document.getElementById('quote-height').value) || 0;
          const layers = parseInt(document.getElementById('quote-layers').value) || 2;
          const quantity = parseInt(document.getElementById('quote-quantity').value) || 1;
          
          if (width <= 0 || height <= 0 || quantity <= 0) {
              alert('Please enter valid dimensions and quantity.');
              return;
          }
          
          const area = width * height / 100; // cm¬≤
          const basePrice = 25;
          const layerMultiplier = layers === 1 ? 0.8 : layers === 2 ? 1 : layers === 4 ? 1.5 : layers === 6 ? 2 : layers === 8 ? 2.5 : layers === 10 ? 3 : 3.5;
          const quantityMultiplier = quantity < 5 ? 1 : quantity < 10 ? 1.3 : quantity < 25 ? 1.8 : quantity < 50 ? 2.3 : 3;
          
          const price = basePrice * area * layerMultiplier * quantityMultiplier;
          const roundedPrice = Math.round(price * 100) / 100;
          
          document.getElementById('quote-price').innerText = '$' + roundedPrice.toFixed(2);
          document.getElementById('quote-result').style.display = 'block';
      });
    }

    // Style <select> fields when changed
    const allSelects = document.querySelectorAll('select');
    allSelects.forEach(select => {
      select.addEventListener('change', function() {
        this.style.borderColor = getCssVariable('--primary');
        this.style.backgroundColor = 'rgba(0, 113, 227, 0.1)';
        setTimeout(() => {
          this.style.backgroundColor = getCssVariable('--light-gray');
        }, 300);
      });
    });

    // Step navigation
    function goToStep(stepNumber) {
        steps.forEach(step => step.classList.remove('active'));
        document.getElementById('step-' + stepNumber).classList.add('active');
        
        const progressPercentage = ((stepNumber - 1) / (steps.length - 1)) * 100;
        progressBar.style.width = progressPercentage + '%';
        
        stepIndicators.forEach(indicator => {
            const step = parseInt(indicator.getAttribute('data-step'));
            if (step <= stepNumber) {
                indicator.classList.add('active');
            } else {
                indicator.classList.remove('active');
            }
        });
        
        currentStep = stepNumber;
    }
    
    if(step1NextBtn) {
        step1NextBtn.addEventListener('click', function() {
            const projectName = document.getElementById('project-name').value;
            const contactName = document.getElementById('contact-name').value;
            const contactEmail = document.getElementById('contact-email').value;
            const boardWidth = document.getElementById('board-width').value;
            const boardHeight = document.getElementById('board-height').value;
            const quantity = document.getElementById('quantity').value;
            
            const missingFields = [];
            if (!projectName) missingFields.push("Project Name");
            if (!contactName) missingFields.push("Contact Name");
            if (!contactEmail) missingFields.push("Contact Email");
            if (!boardWidth || !boardHeight) missingFields.push("Board Dimensions");
            if (!quantity) missingFields.push("Quantity");
            
            if (missingFields.length > 0) {
                alert('Please fill in the following required fields:\n‚Ä¢ ' + missingFields.join('\n‚Ä¢ '));
                return;
            }
            
            goToStep(2);
            window.scrollTo(0, 0); // Scroll to the top of the page
        });
    }
    
    if(step2NextBtn) {
        step2NextBtn.addEventListener('click', function() {
            const gerberFiles = document.getElementById('gerber-files').files;
            
            if (gerberFiles.length === 0) {
                alert('Please upload Gerber files before proceeding.');
                return;
            }
            
            steps.forEach(step => step.classList.remove('active'));
            document.getElementById('step-3').classList.add('active');
            
            progressBar.style.width = '100%';
            stepIndicators.forEach(indicator => {
                const step = parseInt(indicator.getAttribute('data-step'));
                if (step <= 3) {
                    indicator.classList.add('active');
                } else {
                    indicator.classList.remove('active');
                }
            });
            
            currentStep = 3;
            
            try {
                populateReview();
            } catch(e) {
                console.error("Error in populateReview:", e);
            }
        });
    }
   
    prevBtns.forEach(btn => {
      btn.addEventListener('click', function() {
          goToStep(currentStep - 1);
      });
    });
    
    // Accordion functionality
    accordions.forEach(accordion => {
      accordion.addEventListener('click', function() {
          this.classList.toggle('active');
          const panel = this.nextElementSibling;
          if (panel.style.maxHeight) {
              panel.style.maxHeight = null;
          } else {
              panel.style.maxHeight = panel.scrollHeight + 'px';
          }
      });
    });

    // PCB Preview
    const soldermaskSelect = document.getElementById('soldermask-color');
    const silkscreenSelect = document.getElementById('silkscreen-color');
    const pcbPreviewImage = document.getElementById('pcb-preview-image');
    const soldermaskPreviewText = document.getElementById('soldermask-preview-text');
    const silkscreenPreviewText = document.getElementById('silkscreen-preview-text');
    
    function updatePCBPreview() {
      const soldermask = soldermaskSelect.value;
      const silkscreen = silkscreenSelect.value;
      
      soldermaskPreviewText.textContent = soldermask;
      silkscreenPreviewText.textContent = silkscreen;
      
      pcbPreviewImage.style.opacity = 0;
      setTimeout(() => {
        pcbPreviewImage.src = `https://cdn.shopify.com/s/files/1/0924/5730/4373/files/pcb-${soldermask}-${silkscreen}.png`;
        pcbPreviewImage.style.opacity = 1;
      }, 300);
    }
    
    function updateSelectOptions() {
      const soldermask = soldermaskSelect.value;
      const silkscreen = silkscreenSelect.value;
      
      // Enable all options first
      Array.from(soldermaskSelect.options).forEach(option => {
        option.disabled = false;
      });
      
      Array.from(silkscreenSelect.options).forEach(option => {
        option.disabled = false;
      });
      
      // Disable matching options (prevent same color selection)
      const silkscreenOption = Array.from(silkscreenSelect.options).find(option => option.value === soldermask);
      if (silkscreenOption) silkscreenOption.disabled = true;
      
      const soldermaskOption = Array.from(soldermaskSelect.options).find(option => option.value === silkscreen);
      if (soldermaskOption) soldermaskOption.disabled = true;
      
      // If current selection is invalid (same colors), change one of them
      if (soldermask === silkscreen) {
        // Find first non-disabled option to switch to
        for (let i = 0; i < silkscreenSelect.options.length; i++) {
          if (!silkscreenSelect.options[i].disabled) {
            silkscreenSelect.value = silkscreenSelect.options[i].value;
            break;
          }
        }
      }
    }
    
    if (soldermaskSelect && silkscreenSelect) {
      soldermaskSelect.addEventListener('change', function() {
        updateSelectOptions();
        updatePCBPreview();
      });
      
      silkscreenSelect.addEventListener('change', function() {
        updateSelectOptions();
        updatePCBPreview();
      });
      
      // Initialize options on page load
      updateSelectOptions();
    }
    
    // File upload display
    const fileInputs = document.querySelectorAll('input[type="file"]');
    fileInputs.forEach(input => {
      input.addEventListener('change', function(e) {
          const files = Array.from(e.target.files);
          const fileListId = this.id + '-list';
          const fileList = document.getElementById(fileListId);
          
          if (fileList) {
              fileList.innerHTML = '';
              files.forEach(file => {
                  const fileItem = document.createElement('div');
                  fileItem.className = 'file-item';
                  fileItem.innerHTML = `<span>${file.name}</span> <button type="button">&times;</button>`;
                  
                  const removeBtn = fileItem.querySelector('button');
                  removeBtn.addEventListener('click', function() {
                      fileItem.remove();
                  });
                  
                  fileList.appendChild(fileItem);
              });
          }
      });
    });
    
    // Assembly upload toggle
    const serviceAssembly = document.getElementById('service-assembly');
    const assemblyUploadSection = document.getElementById('assembly-upload-section');
    
    if(serviceAssembly && assemblyUploadSection) {
      serviceAssembly.addEventListener('change', function() {
          assemblyUploadSection.style.display = this.checked ? 'block' : 'none';
      });
      assemblyUploadSection.style.display = serviceAssembly.checked ? 'block' : 'none';
    }
    
    // Populate Review Step
    function populateReview() {
      document.getElementById('review-project-name').textContent = document.getElementById('project-name').value;
      const contactName = document.getElementById('contact-name').value;
      const contactEmail = document.getElementById('contact-email').value;
      document.getElementById('review-contact').textContent = `${contactName} (${contactEmail})`;
      const width = document.getElementById('board-width').value;
      const height = document.getElementById('board-height').value;
      document.getElementById('review-dimensions').textContent = `${width} √ó ${height}`;
      document.getElementById('review-quantity').textContent = document.getElementById('quantity').value;
      document.getElementById('review-layers').textContent = document.getElementById('layers').options[document.getElementById('layers').selectedIndex].text;
      
      const serviceTypes = [];
      if (document.getElementById('service-fabrication').checked) serviceTypes.push('PCB Fabrication');
      if (document.getElementById('service-assembly').checked) serviceTypes.push('PCB Assembly');
      document.getElementById('review-service-type').textContent = serviceTypes.join(', ');
      
      const turnTimeSelect = document.getElementById('turn-time');
      document.getElementById('review-turn-time').textContent = turnTimeSelect.options[turnTimeSelect.selectedIndex].text;
      
      const reviewFiles = document.getElementById('review-files');
      reviewFiles.innerHTML = '';
      const fileInputs = ['gerber-files', 'bom-file', 'pnp-file', 'additional-files'];
      fileInputs.forEach(inputId => {
          const input = document.getElementById(inputId);
          if (input && input.files.length > 0) {
              const fileList = document.createElement('div');
              fileList.innerHTML = `<strong>${input.previousElementSibling.textContent.trim()}:</strong>`;
              const ul = document.createElement('ul');
              Array.from(input.files).forEach(file => {
                  const li = document.createElement('li');
                  li.textContent = file.name;
                  ul.appendChild(li);
              });
              fileList.appendChild(ul);
              reviewFiles.appendChild(fileList);
          }
      });
    }
    
    // Form submit handler
    const form = document.getElementById('pcb-order-form');
    if(form) {
      form.addEventListener('submit', function(e) {
          e.preventDefault();
          alert('Order submitted successfully! We will contact you shortly with a final quote.');
      });
    }
});
</script>
</body>
</html>
